<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dark Horse Investment Group -- Portfolio</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    table { width:100%; border-collapse: separate; border-spacing:0; margin-top:20px; border-radius:6px; overflow:hidden; box-shadow:0 2px 8px rgba(0,0,0,0.05); }
    th, td { border:1px solid #ddd; padding:8px; text-align:center; }
    th { background:#f4f4f4; }
    tbody tr:nth-child(even) { background: #fafafa; font-weight: normal; }

    .chart-wrapper { 
      width:480px; 
      height:480px; 
      margin:20px; 
      display:flex; 
      justify-content:center; 
      align-items:center; 
    }
    .chart-wrapper canvas { 
      width:480px !important; 
      height:480px !important; 
    }

    .chart-container { 
      display:flex; 
      justify-content:center; 
      gap:40px; 
      flex-wrap:wrap; 
      margin-top:40px; 
    }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <h1 style="text-align:center; font-size:36px;"><em>Dark Horse Investment Group</em></h1>

  <div style="margin-top: 20px;">
    <h2 style="text-align:center;">Our Philosophy</h2>
    <p style="max-width: 700px; margin: 0 auto 20px auto; font-size: 16px; line-height: 1.8;">At Dark Horse, we believe in a hybrid investment approach that balances long-term discipline with active experimentation, ensuring stability for shareholders and an optimal learning experience for students. Our portfolio is constructed using a core-satellite framework:</p>
    <ul style="max-width: 700px; margin: 0 auto; font-size: 16px; text-align:left; line-height: 1.8;">
      <li><strong>The core portion (60–70%)</strong> is composed of high-quality companies and ETFs designed to provide steady, long-term growth. These holdings reflect broader market exposure and are selected for their durable business models and consistent performance.</li>
      <li><strong>The satellite portion (20–30%)</strong> serves as a platform for experimentation and higher risk/reward ideas. Satellite positions are intentionally flexible and may include:
        <ul style="line-height: 1.8;">
          <li>Emerging companies with long-term upside.</li>
          <li>Deep value or contrarian opportunities.</li>
          <li>Macro/event-driven strategies.</li>
        </ul>
      </li>
    </ul>
    <p style="max-width: 700px; margin: 20px auto 0 auto; font-size: 16px; line-height: 1.8;">Together, this structure allows us to remain grounded in fundamentals while encouraging independent thinking, curiosity, and real-world decision-making.</p>
  </div>

  <h2 style="text-align:center; margin-top:20px;">Portfolio</h2>

  <table id="portfolio">
    <thead>
      <tr><th>Symbol</th><th>Shares</th><th>Price</th><th>Cost Basis</th><th>Market Value</th><th>Gain/Loss</th><th>% Gain/Loss</th></tr>
    </thead>
    <tbody></tbody>
    <tfoot>
      <tr>
        <td><strong>Total</strong></td><td>-</td><td>-</td>
        <td id="totalValue">$0.00</td>
        <td id="totalCost">$0.00</td>
        <td id="totalGain">$0.00</td>
        <td id="totalPercentGain">0.00%</td>
      </tr>
    </tfoot>
  </table>

  <div class="chart-container">
  <div>
    <p style="text-align:center; font-weight:bold; margin-bottom:4px;">Total Exposure</p>
    <div class="chart-wrapper"><canvas id="SectorChart"></canvas></div>
  </div>
  <div>
    <p style="text-align:center; font-weight:bold; margin-bottom:4px;">ETF Exposure Breakdown</p>
    <div class="chart-wrapper"><canvas id="etfChart"></canvas></div>
  </div>
</div>

  <div id="customLegend" style="text-align:center; margin-top: 20px;"></div>

  <h2 style="text-align:center; margin-top:40px;">Ownership</h2>
    <table>
      <thead>
        <tr><th>Date</th><th>Name</th><th>Initial Investment</th><th>Market Value</th><th>Gain/Loss</th><th>% Gain/Loss</th><th>Ownership %</th></tr>
      </thead>
      <tbody>
        <tr><td>9/19/2023</td><td>Nate Lerner</td><td>$1,000.00</td><td>$1,521.60</td><td style="color:green;">$521.60</td><td style="color:green;">52.16%</td><td>12.18%</td></tr>
        <tr><td>9/19/2023</td><td>Miles Ziskin</td><td>$1,000.00</td><td>$1,521.60</td><td style="color:green;">$521.60</td><td style="color:green;">52.16%</td><td>12.18%</td></tr>
        <tr><td>9/19/2023</td><td>Peter Frame</td><td>$1,250.00</td><td>$1,902.00</td><td style="color:green;">$652.00</td><td style="color:green;">52.16%</td><td>15.23%</td></tr>
        <tr><td>9/19/2023</td><td>Ryan Khouri</td><td>$100.00</td><td>$152.16</td><td style="color:green;">$52.16</td><td style="color:green;">52.16%</td><td>1.22%</td></tr>
        <tr><td>9/19/2023</td><td>Julian Stux</td><td>$100.00</td><td>$152.16</td><td style="color:green;">$52.16</td><td style="color:green;">52.16%</td><td>1.22%</td></tr>
        <tr><td>9/19/2023</td><td>Sam Glusker</td><td>$100.00</td><td>$152.16</td><td style="color:green;">$52.16</td><td style="color:green;">52.16%</td><td>1.22%</td></tr>
        <tr><td>1/17/2024</td><td>Shayden Schorr</td><td>$100.00</td><td>$143.73</td><td style="color:green;">$43.73</td><td style="color:green;">43.73%</td><td>1.15%</td></tr>
        <tr><td>2/9/2024</td><td>Will Cerniglia</td><td>$450.00</td><td>$608.67</td><td style="color:green;">$158.67</td><td style="color:green;">35.26%</td><td>4.87%</td></tr>
        <tr><td>4/3/2024</td><td>Sam Northrop</td><td>$300.00</td><td>$384.63</td><td style="color:green;">$84.63</td><td style="color:green;">28.21%</td><td>3.08%</td></tr>
        <tr><td>4/25/2024</td><td>Jack Blase</td><td>$1,000.00</td><td>$1,319.20</td><td style="color:green;">$319.20</td><td style="color:green;">31.92%</td><td>10.56%</td></tr>
        <tr><td>5/7/2024</td><td>Julian Ziskin</td><td>$1,000.00</td><td>$1,253.00</td><td style="color:green;">$253.00</td><td style="color:green;">25.30%</td><td>10.03%</td></tr>
        <tr><td>6/9/2024</td><td>James Van Varick</td><td>$200.00</td><td>$230.48</td><td style="color:green;">$30.48</td><td style="color:green;">15.24%</td><td>1.85%</td></tr>
        <tr><td>6/24/2024</td><td>Ziskin Parents</td><td>$2,000.00</td><td>$2,266.80</td><td style="color:green;">$266.80</td><td style="color:green;">13.34%</td><td>18.15%</td></tr>
        <tr><td>11/7/2024</td><td>Zach Appel</td><td>$150.00</td><td>$156.02</td><td style="color:green;">$6.01</td><td style="color:green;">4.01%</td><td>1.25%</td></tr>
        <tr><td>5/13/2025</td><td>Julian Ziskin (2)</td><td>$700.00</td><td>$724.29</td><td style="color:green;">$24.29</td><td style="color:green;">3.47%</td><td>5.80%</td></tr>
      </tbody>
    </table>

  <script>
    const apiKey = 'd10qn8pr01qse6ldf5v0d10qn8pr01qse6ldf5vg';

    const portfolio = [
      { symbol: "AAPL", shares: 1.0083, costBasis: 176.04 },
      { symbol: "AMZN", shares: 3, costBasis: 396.36 },
      { symbol: "ARM", shares: 3, costBasis: 224.75 },
      { symbol: "BABA", shares: 2, costBasis: 144.80 },
      { symbol: "BIRK", shares: 2, costBasis: 89.31 },
      { symbol: "CAT", shares: 1, costBasis: 351.60 },
      { symbol: "CRWD", shares: 1, costBasis: 309.50 },
      { symbol: "HWM", shares: 4.0207, costBasis: 184.24 },
      { symbol: "JPM", shares: 2.0677, costBasis: 307.32 },
      { symbol: "KKR", shares: 1.0029, costBasis: 151.39 },
      { symbol: "META", shares: 1, costBasis: 438.23 },
      { symbol: "NVDA", shares: 10.0042, costBasis: 484.31 },
      { symbol: "NVO", shares: 3, costBasis: 375.84 },
      { symbol: "RIOT", shares: 7, costBasis: 72.80 },
      { symbol: "TSLA", shares: 1, costBasis: 243.39 },
      { symbol: "UNH", shares: 1.024, costBasis: 528.73 },
      { symbol: "WMT", shares: 9.1853, costBasis: 485.87 },
      { symbol: "BTC", shares: 1, costBasis: 24.48 },
      { symbol: "CIBR", shares: 4, costBasis: 221.40 },
      { symbol: "ETH", shares: 1, costBasis: 28.03 },
      { symbol: "ETHE", shares: 10, costBasis: 252.27 },
      { symbol: "GBTC", shares: 5, costBasis: 220.30 },
      { symbol: "IWM", shares: 2, costBasis: 408.62 },
      { symbol: "KWEB", shares: 18, costBasis: 434.76 },
      { symbol: "SOXX", shares: 3, costBasis: 752.55 },
      { symbol: "VNQ", shares: 3, costBasis: 270.23 },
      { symbol: "VTV", shares: 3.0703, costBasis: 495.90 },
      { symbol: "VUG", shares: 2.01, costBasis: 691.19 },
      { symbol: "XME", shares: 3.017, costBasis: 182.41 }
    ];

    const cashPosition = { symbol: "CASH", costBasis:407.36 };

    const SectorMap = {
      AAPL: "Technology", AMZN: "Consumer Discretionary", ARM: "Technology",
      BABA: "Consumer Discretionary", BIRK: "Consumer Discretionary", CAT: "Industrials",
      CRWD: "Technology", HWM: "Industrials", JPM: "Financials", KKR: "Financials",
      META: "Technology", NVDA: "Technology", NVO: "Healthcare", RIOT: "Technology",
      TSLA: "Consumer Discretionary", UNH: "Healthcare", WMT: "Consumer Staples",
      BTC: "Cryptocurrency", CIBR: "ETF", ETH: "Cryptocurrency", ETHE: "Cryptocurrency",
      GBTC: "Cryptocurrency", IWM: "ETF", KWEB: "ETF", SOXX: "ETF", VNQ: "Real Estate",
      VTV: "ETF", VUG: "ETF", XME: "ETF"
    };

    const etfSectorMap = {  
      IWM: "Small Cap", KWEB: "Technology", SOXX: "Technology", VNQ: "Real Estate",
      VTV: "Value", VUG: "Technology", XME: "Metals & Mining"  
    };

    const colorMap = {
      Technology: "#1f77b4",
      "Consumer Discretionary": "#ff7f0e",
      Healthcare: "#2ca02c",
      Financials: "#d62728",
      Industrials: "#9467bd",
      "Consumer Staples": "#8c564b",
      Cryptocurrency: "#e377c2",
      "Real Estate": "#7f7f7f",
      ETF: "#bcbd22",
      Cash: "#17becf",
      Value: "#aec7e8",
      "Small Cap": "#ffbb78",
      "Metals & Mining": "#98df8a",
};

    async function fetchPrice(symbol) {
      const r = await fetch(`https://finnhub.io/api/v1/quote?symbol=${symbol}&token=${apiKey}`);
      const j = await r.json();
      return j.c;
    }

    function renderLegend() {
      const container = document.getElementById("customLegend");
      container.innerHTML = '<p><strong>Sectors</strong></p>' +
        '<div style="display:grid; grid-template-columns: repeat(3, auto); gap:8px 24px; justify-content:center; text-align:left; font-size:14px;">' +
        Object.entries(colorMap).map(([label, color]) =>
          `<div style="margin:4px 0;"><span style="display:inline-block;width:12px;height:12px;background:${color};margin-right:6px;"></span>${label}</div>`
        ).join('') + '</div>';
    }

    function renderPieChart({ canvasId, dataObj }) {
      const labels = Object.keys(dataObj);
      const data = Object.values(dataObj);
      const total = data.reduce((a,b)=>a+b,0);
      const percentLabels = labels.map((l,i) => `${l} (${((data[i]/total)*100).toFixed(1)}%)`);
      const ctx = document.getElementById(canvasId).getContext("2d");
      new Chart(ctx, {
        type:'doughnut',
        data: {
          labels:percentLabels,
          datasets:[{
            data,
            backgroundColor: labels.map(l => colorMap[l]||"#888"),
            cutout: '35%',
            radius: '100%'
          }]
        },
        options: {
          responsive: false,
          maintainAspectRatio: false,
          layout: {
            padding: 20
          },
          plugins: {
            legend: { display: false },
            tooltip: {
              callbacks: {
                label: ctx => {
                  const raw = ctx.raw;
                  const pct = ((raw / total) * 100).toFixed(1);
                  return `${ctx.label}: $${raw.toFixed(2)} (${pct}%)`;
                }
              }
            }
          }
        }
      });
    }

    async function updatePortfolio() {
      const tbody = document.querySelector("#portfolio tbody");
      tbody.innerHTML = "";
      let tMV = 0, tCB = 0;
      const SectorTotals = {};
      const etfTotals = {};

      for (const s of portfolio) {
        let price;
        try { price = await fetchPrice(s.symbol); }
        catch { continue; }
        const mv = price * s.shares;
        tMV += mv;
        tCB += s.costBasis;
        const ind = SectorMap[s.symbol]; if (!ind) continue;
        SectorTotals[ind] = (SectorTotals[ind] || 0) + mv;
        if (etfSectorMap[s.symbol]) {
          const etfInd = etfSectorMap[s.symbol] || "Other";
          etfTotals[etfInd] = (etfTotals[etfInd] || 0) + mv;
        }
        const gain = mv - s.costBasis;
        const pct = (gain / s.costBasis) * 100;
        const row = document.createElement("tr");
        row.innerHTML = `
          <td>${s.symbol}</td><td>${s.shares.toFixed(4)}</td>
          <td>$${price.toFixed(2)}</td><td>$${s.costBasis.toFixed(2)}</td><td>$${mv.toFixed(2)}</td>
          <td style="color:${gain >= 0 ? 'green' : 'red'};">$${gain.toFixed(2)}</td>
          <td style="color:${gain >= 0 ? 'green' : 'red'};">${pct.toFixed(2)}%</td>
        `;
        tbody.appendChild(row);
      }

      SectorTotals["Cash"] = (SectorTotals["Cash"] || 0) + cashPosition.costBasis;
      tMV += cashPosition.costBasis;
      tCB += cashPosition.costBasis;
      const cr = document.createElement("tr");
      cr.innerHTML = `
        <td>CASH</td><td>-</td><td>-</td>
        <td>$${cashPosition.costBasis.toFixed(2)}</td><td>$${cashPosition.costBasis.toFixed(2)}</td>
        <td style="color:gray">$0.00</td><td style="color:gray">0.00%</td>`;
      tbody.appendChild(cr);

      const gain = tMV - tCB;
      const percentGain = (gain / tCB) * 100;
      document.getElementById("totalValue").textContent = `$${tMV.toFixed(2)}`;
      document.getElementById("totalCost").textContent = `$${tCB.toFixed(2)}`;
      document.getElementById("totalGain").textContent = `$${gain.toFixed(2)}`;
      document.getElementById("totalPercentGain").textContent = `${percentGain.toFixed(2)}%`;
      document.getElementById("totalGain").style.color = gain >= 0 ? 'green' : 'red';
      document.getElementById("totalPercentGain").style.color = gain >= 0 ? 'green' : 'red';

      renderPieChart({ canvasId: 'SectorChart', dataObj: SectorTotals });
      renderPieChart({ canvasId: 'etfChart', dataObj: etfTotals });
      renderLegend();
    }

    updatePortfolio();
  </script>
  
